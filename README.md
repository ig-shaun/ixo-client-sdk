# ixo-client SDK

Everything you need to easily interact with the ixo ecosystem;
from identity generation to interactions with components such as
the Blocksync, the blockchain and cell nodes.

The SDK has 4 main parts:

- **ixo-Crypto tools**: Generates mnemonic seeds, decentralised identitifiers, cryptographic
  key pairs and provides message signing methods.

- **ixo-Blockchain client**: Composes, signs (with secp256k1)and broadcasts messages to ixo-protocol blockchains. Gets data directly from ixo-blockchain RPC endpoints.

- **ixo-BlockSync client**: Gets data from the ixo-BlockSync index database, with standard queries.

- **ixo-CellNode client**: Composes messages, signs (with ED25519), writes to an ixo-CellNode private REST endpoint for did-authentication, and reads from the private endpoint with did-authentication access control.

- *(ixo-Identity client: Coming soon)*

**Note**: This documentation is work in progress. 
The functionality of the SDK listed below is already available. 
Don't hesitate to try them out or even to check out the source (it really is simple).
Feedback is welcome -- please don't hesitate to send issues & PRs.


## Usage

    const {
        crypto,
        makeBlockchainClient,
        makeBlocksyncClient,
        makeCellNodeClient,
    }
        = require('@ixo/client-sdk')

    const
        blockchainCli = makeBlockchainClient('<chain url>'),
        blocksyncCli = makeBlocksyncClient('<blocksync url>'),
        cellnodeCli = makeCellnodeClient('<cell node url>'),
        anotherCellnodeCli = makeCellnodeClient('<another cell node url>')


## Crypto tools

- `generateMnemonic([entropy])`

  Returns a randomly generated mnemonic.

        const mnemonic = crypto.generateMnemonic()

  In environments that don't support random byte generation
  natively, you will need to pass a custom entropy object
  yourself. React Native example:

        const {randomBytes} = require('react-native-randombytes')

        const mnemonic = crypto.generateMnemonic(randomBytes(16))


- `deriveAddress(mnemonic)`

  Returns a BEP32 account address, using the given mnemonic as the
  seed. This is the account address on any ixo or Cosmos blockchain.


- `deriveECKeyPair(mnemonic)`

  Returns a key-pair generated by Bitcoin's SECP256k1 algorithm,
  using the given mnemonic as the seed.


- `signEC(message, privateKey)`

  Signs a given message with the client's SECP256k1 private key, to
 prepare this for broadcast to any Cosmos SDK-based blockchain. 
 Returns the signature value.


- `deriveDidDoc(mnemonic)`

  Returns the DID document object for a given DID, generated using the given
  mnemonic as the seed. See [the Sovrin DID package on NPM](https://npmjs.com/package/sovrin-did) for the return
  schema. 
  See [the Sovrin protocol docs on the DID Method](https://github.com/sovrin-foundation/protocol/blob/master/did.md).


- `deriveAgentAddress(verifyKey)`

  Returns a Cosmos-SDK account address using the given verify key (from
  a DID) as the seed. This is the address for the ixo agent.


## The ixo-blockchain client

- `raw(url, opts)`

  Make a direct API call to the blockchain. 
  Check out the Cosmos REST API docs here: https://cosmos.network/rpc/v0.37.9

  Examples:

      const {body: balances} = cli.raw('/bank/balances/' + someAddress)

      const {body: block} = cli.raw('/blocks/latest')

- `getAccounts(address)`

  Gets the accounts associated with a given address.

- `makeStdMsg(input)`

  Formats any unsigned message into the format required for validation by Tendermint, using the given input.

- `broadcast(signedTx)`

  Sends a signed message to an ixo-blockchain node RPC endpoint.


## The ixo-Blocksync client

- `raw(url, opts)`

  Makes direct Rest API calls to the blocksync to query and get indexed blockchain data. 
  Check out the Blocksync API for available endpoints.

  Examples:

      const {body: {signed_data, fee}}
        = cli.raw('/api/sign_data', {method: 'POST', body: { ... }})

      const {body: projectList} = cli.raw('/api/project/listProjects')

- `ping()`

  Ping the BlockSync service to check if this is working properly.

- `getStats()`

- `registerUser(didDoc)`

  // Check - is this really a DID registration function?

- `getDidDoc(did)`

  Returns the full DID document for a given agent or entity DID.

- `listProjects(senderDid)`

  Lists all available projects which have been created using the given DID.

- `getProject(did)`

  Get details of a specific project by its Entity DID.
  // Returns -- give example


## The ixo-CellNode client

- `raw(url, opts)`

  Make direct Rest API calls to a given CellNode URI endpoint.
  Requires DID-Authentication and performs stateless validation of messages.
  See the cell node API docs for available endpoints.

- `entity.create(data, signature)`

- `entity.update(data, signature)`

- `entity.fund(data, signature)`

- `entity.createPublic(base64Content)`

- `entity.fetchPublic(key)`

- `agent.create(data, signature)`

- `agent.list(data, signature)`

- `agent.updateStatus(data, signature)`

- `claim.create(data, signature)`

- `claim.evaluate(data, signature)`

- `claim.list(data, signature)`
